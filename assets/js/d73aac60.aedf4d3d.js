"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[1622],{6968:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>o,contentTitle:()=>c,default:()=>u,frontMatter:()=>a,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"kirka/security","title":"Security","description":"Kerberos Authentication","source":"@site/docs/kirka/security.md","sourceDirName":"kirka","slug":"/kirka/security","permalink":"/kirka/security","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/kirka/security.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"id":"security","title":"Security","sidebar_position":6},"sidebar":"tutorialSidebar","previous":{"title":"Configuration","permalink":"/kirka/configuration"},"next":{"title":"Examples","permalink":"/kirka/examples"}}');var s=n(4848),t=n(8453);const a={id:"security",title:"Security",sidebar_position:6},c=void 0,o={},l=[{value:"Kerberos Authentication",id:"kerberos-authentication",level:2},{value:"Apache Ranger Integration",id:"apache-ranger-integration",level:2},{value:"Configuration",id:"configuration",level:3},{value:"Features",id:"features",level:3},{value:"Access Control (Hadoop Level)",id:"access-control-hadoop-level",level:2},{value:"Gateway (Knox)",id:"gateway-knox",level:2},{value:"Best Practices",id:"best-practices",level:2}];function d(e){const r={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.h2,{id:"kerberos-authentication",children:"Kerberos Authentication"}),"\n",(0,s.jsxs)(r.p,{children:["Enable in ",(0,s.jsx)(r.code,{children:"application.properties"}),":"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-properties",children:"security.kerberos.enabled=true\r\nsecurity.kerberos.principal=kirka/_HOST@REALM.COM\r\nsecurity.kerberos.keytab=/etc/security/keytabs/kirka.service.keytab\r\nsecurity.kerberos.krb5conf=/etc/krb5.conf\n"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Automatic management"}),": When deployed via Ambari Mpack, Kerberos identities and keytabs are managed automatically."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Keytab Permissions"}),": Ensure keytab file permissions are restrictive: ",(0,s.jsx)(r.code,{children:"chmod 400 /path/to/kirka.service.keytab"}),"."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Consistency"}),": HBase and HDFS must be Kerberized consistently for Kirka to operate in a secure cluster."]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"apache-ranger-integration",children:"Apache Ranger Integration"}),"\n",(0,s.jsx)(r.p,{children:"Kirka integrates with Apache Ranger for fine-grained access control."}),"\n",(0,s.jsx)(r.h3,{id:"configuration",children:"Configuration"}),"\n",(0,s.jsxs)(r.p,{children:["Enable Ranger in ",(0,s.jsx)(r.code,{children:"application.properties"}),":"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-properties",children:"ranger.service.name=kirka\r\nranger.admin.url=http://ranger-admin-host:6080\r\nranger.policy.cache.dir=/etc/kirka/conf/policycache\r\nsecurity.authorization.owner.enabled=true\n"})}),"\n",(0,s.jsx)(r.h3,{id:"features",children:"Features"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Centralized Policy Management"}),": Define access policies for experiments and runs in Ranger Admin."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Resource Hierarchy"}),": Policies are based on ",(0,s.jsx)(r.code,{children:"namespace/experiment/run"}),"."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Owner-based Authorization"}),": If enabled, owners have full access to their own resources."]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Audit Logs"}),": All access requests are logged and can be viewed in Ranger Audit."]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"access-control-hadoop-level",children:"Access Control (Hadoop Level)"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"HBase: Namespace ACLs for experiments/runs tables."}),"\n",(0,s.jsx)(r.li,{children:"HDFS: Directory ACLs for artifacts (e.g., /user/kirka/artifacts)."}),"\n",(0,s.jsx)(r.li,{children:"Application-level: MLflow permissions if extended."}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"gateway-knox",children:"Gateway (Knox)"}),"\n",(0,s.jsxs)(r.p,{children:["Kirka integrates with Apache Knox for proxying and auth. See ",(0,s.jsx)(r.a,{href:"/kirka/examples",children:"Examples"}),"."]}),"\n",(0,s.jsx)(r.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Rotate keytabs regularly."}),"\n",(0,s.jsx)(r.li,{children:"Use TLS for all endpoints."}),"\n",(0,s.jsx)(r.li,{children:"Audit logs for access."}),"\n"]})]})}function u(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>a,x:()=>c});var i=n(6540);const s={},t=i.createContext(s);function a(e){const r=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(t.Provider,{value:r},e.children)}}}]);