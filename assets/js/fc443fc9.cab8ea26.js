"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7905],{8453:(e,i,n)=>{n.d(i,{R:()=>l,x:()=>c});var r=n(6540);const t={},s=r.createContext(t);function l(e){const i=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function c(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),r.createElement(s.Provider,{value:i},e.children)}},8834:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"argus/security","title":"Security","description":"SSL/TLS","source":"@site/docs/argus/security.md","sourceDirName":"argus","slug":"/argus/security","permalink":"/argus/security","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/argus/security.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"id":"security","title":"Security","sidebar_position":6},"sidebar":"tutorialSidebar","previous":{"title":"Configuration","permalink":"/argus/configuration"},"next":{"title":"Examples","permalink":"/argus/examples"}}');var t=n(4848),s=n(8453);const l={id:"security",title:"Security",sidebar_position:6},c=void 0,d={},o=[{value:"SSL/TLS",id:"ssltls",level:2},{value:"Trino",id:"trino",level:3},{value:"Hive/Impala",id:"hiveimpala",level:3},{value:"Phoenix",id:"phoenix",level:3},{value:"Kudu",id:"kudu",level:3},{value:"Authentication",id:"authentication",level:2},{value:"Trino",id:"trino-1",level:3},{value:"Hive/Impala",id:"hiveimpala-1",level:3},{value:"Phoenix",id:"phoenix-1",level:3},{value:"Kudu",id:"kudu-1",level:3},{value:"Query tracking",id:"query-tracking",level:2},{value:"Best practices",id:"best-practices",level:2}];function a(e){const i={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.h2,{id:"ssltls",children:"SSL/TLS"}),"\n",(0,t.jsx)(i.p,{children:"Argus supports SSL/TLS for all backends. Enable via the connection string:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{children:"SSL=1;SSLCAFile=/etc/ssl/certs/ca.pem;SSLVerify=1\n"})}),"\n",(0,t.jsx)(i.h3,{id:"trino",children:"Trino"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Full HTTPS with certificate verification"}),"\n",(0,t.jsx)(i.li,{children:"Client certificate and key support (mutual TLS)"}),"\n",(0,t.jsx)(i.li,{children:"Implemented via libcurl SSL options"}),"\n"]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{children:"HOST=trino.example.com;PORT=8443;\r\nSSL=1;SSLVerify=1;\r\nSSLCertFile=/opt/certs/client-cert.pem;\r\nSSLKeyFile=/opt/certs/client-key.pem;\r\nSSLCAFile=/opt/certs/root-ca.pem;\r\nBACKEND=trino\n"})}),"\n",(0,t.jsx)(i.h3,{id:"hiveimpala",children:"Hive/Impala"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Thrift SSL sockets via OpenSSL integration"}),"\n",(0,t.jsx)(i.li,{children:"CA certificate configuration"}),"\n",(0,t.jsxs)(i.li,{children:["Conditional compilation with ",(0,t.jsx)(i.code,{children:"ARGUS_HAS_THRIFT_SSL"})," flag"]}),"\n",(0,t.jsx)(i.li,{children:"Graceful fallback when SSL not available"}),"\n"]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{children:"HOST=hive.example.com;PORT=10000;\r\nSSL=1;SSLCAFile=/etc/ssl/certs/ca-bundle.crt;SSLVerify=1;\r\nBACKEND=hive\n"})}),"\n",(0,t.jsx)(i.h3,{id:"phoenix",children:"Phoenix"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Full HTTPS with certificate verification via Phoenix Query Server"}),"\n",(0,t.jsx)(i.li,{children:"Same SSL options as Trino (libcurl-based)"}),"\n"]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{children:"HOST=pqs.example.com;PORT=8765;\r\nSSL=1;SSLVerify=1;\r\nSSLCAFile=/opt/certs/root-ca.pem;\r\nBACKEND=phoenix\n"})}),"\n",(0,t.jsx)(i.h3,{id:"kudu",children:"Kudu"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Kudu supports Kerberos authentication natively via the C++ client"}),"\n",(0,t.jsx)(i.li,{children:"SSL/TLS encryption is handled at the Kudu cluster level"}),"\n",(0,t.jsx)(i.li,{children:"The Argus Kudu backend passes timeout settings to the client builder"}),"\n",(0,t.jsx)(i.li,{children:"For secured clusters, ensure Kerberos tickets are available in the environment"}),"\n"]}),"\n",(0,t.jsx)(i.h2,{id:"authentication",children:"Authentication"}),"\n",(0,t.jsxs)(i.table,{children:[(0,t.jsx)(i.thead,{children:(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.th,{children:"Mechanism"}),(0,t.jsx)(i.th,{children:"Description"})]})}),(0,t.jsxs)(i.tbody,{children:[(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"NOSASL"}),(0,t.jsx)(i.td,{children:"No authentication (development/testing only)"})]}),(0,t.jsxs)(i.tr,{children:[(0,t.jsx)(i.td,{children:"PLAIN"}),(0,t.jsx)(i.td,{children:"Username/password over SASL PLAIN"})]})]})]}),"\n",(0,t.jsxs)(i.p,{children:["Set via the ",(0,t.jsx)(i.code,{children:"AUTHMECH"})," connection string parameter."]}),"\n",(0,t.jsx)(i.h3,{id:"trino-1",children:"Trino"}),"\n",(0,t.jsxs)(i.p,{children:["Authentication uses HTTP headers (",(0,t.jsx)(i.code,{children:"X-Trino-User"}),"). For password-protected clusters, credentials are sent with each request."]}),"\n",(0,t.jsx)(i.h3,{id:"hiveimpala-1",children:"Hive/Impala"}),"\n",(0,t.jsx)(i.p,{children:"Authentication negotiated during Thrift session open. SASL PLAIN sends credentials in the initial handshake."}),"\n",(0,t.jsx)(i.h3,{id:"phoenix-1",children:"Phoenix"}),"\n",(0,t.jsxs)(i.p,{children:["Authentication is configured on the Phoenix Query Server side. The Argus driver sends the ",(0,t.jsx)(i.code,{children:"UID"})," as the user in the Avatica ",(0,t.jsx)(i.code,{children:"openConnection"})," request."]}),"\n",(0,t.jsx)(i.h3,{id:"kudu-1",children:"Kudu"}),"\n",(0,t.jsx)(i.p,{children:"Kudu uses Kerberos for authentication in secured clusters. Ensure valid Kerberos credentials are available before connecting."}),"\n",(0,t.jsx)(i.h2,{id:"query-tracking",children:"Query tracking"}),"\n",(0,t.jsxs)(i.p,{children:["Use ",(0,t.jsx)(i.code,{children:"ApplicationName"})," to identify queries in backend audit logs:"]}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Trino"}),": Sets ",(0,t.jsx)(i.code,{children:"X-Trino-Source"})," HTTP header"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Hive"}),": Sets ",(0,t.jsx)(i.code,{children:"hive.query.source"})," session configuration"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Phoenix"}),": Sent in Avatica connection properties"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Kudu"}),": Logged locally via Argus logging"]}),"\n"]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{children:"ApplicationName=MyETLPipeline\n"})}),"\n",(0,t.jsx)(i.h2,{id:"best-practices",children:"Best practices"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["Use SSL/TLS in production (",(0,t.jsx)(i.code,{children:"SSL=1;SSLVerify=1"}),")."]}),"\n",(0,t.jsx)(i.li,{children:"Use absolute paths for certificate files."}),"\n",(0,t.jsxs)(i.li,{children:["Test with ",(0,t.jsx)(i.code,{children:"SSLVerify=0"})," first, then enable verification."]}),"\n",(0,t.jsxs)(i.li,{children:["Set ",(0,t.jsx)(i.code,{children:"AUTHMECH=PLAIN"})," with credentials for authenticated clusters."]}),"\n",(0,t.jsx)(i.li,{children:"Rotate certificates on a regular schedule."}),"\n",(0,t.jsxs)(i.li,{children:["Use ",(0,t.jsx)(i.code,{children:"ApplicationName"})," for audit trail."]}),"\n"]})]})}function h(e={}){const{wrapper:i}={...(0,s.R)(),...e.components};return i?(0,t.jsx)(i,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}}}]);