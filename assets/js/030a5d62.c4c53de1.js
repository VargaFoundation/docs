"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[210],{5725:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"tarn/troubleshooting","title":"Troubleshooting","description":"Common Issues","source":"@site/docs/tarn/troubleshooting.md","sourceDirName":"tarn","slug":"/tarn/troubleshooting","permalink":"/tarn/troubleshooting","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/tarn/troubleshooting.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"id":"troubleshooting","title":"Troubleshooting","sidebar_position":7},"sidebar":"tutorialSidebar","previous":{"title":"Security","permalink":"/tarn/security"},"next":{"title":"FAQ","permalink":"/tarn/faq"}}');var r=s(4848),o=s(8453);const t={id:"troubleshooting",title:"Troubleshooting",sidebar_position:7},c=void 0,l={},d=[{value:"Common Issues",id:"common-issues",level:2},{value:"Diagnostics",id:"diagnostics",level:2}];function a(e){const n={code:"code",h2:"h2",li:"li",p:"p",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"common-issues",children:"Common Issues"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"YARN containers fail to start"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Verify Docker is whitelisted in ",(0,r.jsx)(n.code,{children:"yarn-site.xml"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Check Linux Container Executor configuration and permissions (",(0,r.jsx)(n.code,{children:"container-executor.cfg"}),")."]}),"\n",(0,r.jsx)(n.li,{children:"Ensure the Triton image is allowed in Docker runtime settings."}),"\n",(0,r.jsx)(n.li,{children:"Review YARN NodeManager logs for Docker launch errors."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Models fail to load"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Confirm model repository path is accessible (HDFS permissions for copy mode)."}),"\n",(0,r.jsxs)(n.li,{children:["For NFS: Verify mount is active on all NodeManagers (",(0,r.jsx)(n.code,{children:"df -h /mnt/hdfs"}),")."]}),"\n",(0,r.jsx)(n.li,{children:"Check AM dashboard for load errors."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Ranger authorization failures"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Ensure ",(0,r.jsx)(n.code,{children:"triton"})," service definition is registered in Ranger Admin."]}),"\n",(0,r.jsxs)(n.li,{children:["Verify policies grant ",(0,r.jsx)(n.code,{children:"list"}),", ",(0,r.jsx)(n.code,{children:"metadata"}),", ",(0,r.jsx)(n.code,{children:"infer"})," permissions."]}),"\n",(0,r.jsxs)(n.li,{children:["Confirm user identity propagation (Kerberos ticket or ",(0,r.jsx)(n.code,{children:"X-TARN-User"})," header)."]}),"\n",(0,r.jsxs)(n.li,{children:["Enable ",(0,r.jsx)(n.code,{children:"--ranger-audit"})," and check audit logs."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"HAProxy updater not working"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Socket permissions: ",(0,r.jsx)(n.code,{children:"chmod 660 /var/run/haproxy.sock"}),", group ",(0,r.jsx)(n.code,{children:"haproxy"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Script token matches ",(0,r.jsx)(n.code,{children:"--token"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["YARN CLI can discover AM (",(0,r.jsx)(n.code,{children:"yarn application -list"}),")."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"No GPU allocation"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"yarn.io/gpu"})," defined in ",(0,r.jsx)(n.code,{children:"resource-types.xml"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["NodeManagers report GPUs (",(0,r.jsx)(n.code,{children:"yarn node -list -showDetails"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:["Scheduler uses ",(0,r.jsx)(n.code,{children:"DominantResourceCalculator"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"diagnostics",children:"Diagnostics"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"AM Dashboard"}),": ",(0,r.jsx)(n.code,{children:"http://<AM_HOST>:<AM_PORT>/dashboard"})," (token required)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Metrics"}),": ",(0,r.jsx)(n.code,{children:"http://<AM_HOST>:<AM_PORT>/metrics?token=<TOKEN>"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"YARN UI"}),": Application logs and container status."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Triton Health"}),": ",(0,r.jsx)(n.code,{children:"/v2/health/ready"})," on each container."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>c});var i=s(6540);const r={},o=i.createContext(r);function t(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);