"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[9287],{8075:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>u,frontMatter:()=>t,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"vorath/installation-deployment","title":"Installation and deployment","description":"This page describes how to install the HDFS CSI driver on Kubernetes using Helm. You can use published images or build","source":"@site/docs/vorath/installation-deployment.md","sourceDirName":"vorath","slug":"/vorath/installation-deployment","permalink":"/vorath/installation-deployment","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/vorath/installation-deployment.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"id":"installation-deployment","title":"Installation and deployment","sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Prerequisites and resources","permalink":"/vorath/prerequisites-resources"},"next":{"title":"Configuration","permalink":"/vorath/configuration"}}');var i=s(4848),l=s(8453);const t={id:"installation-deployment",title:"Installation and deployment",sidebar_position:4},a=void 0,o={},d=[];function c(e){const n={code:"code",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"This page describes how to install the HDFS CSI driver on Kubernetes using Helm. You can use published images or build\r\nand push your own image."}),"\n",(0,i.jsx)(n.p,{children:"Prerequisites:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Helm 3.x and kubectl configured"}),"\n",(0,i.jsx)(n.li,{children:"Access to a container registry if you publish a custom image"}),"\n",(0,i.jsx)(n.li,{children:"Known HDFS settings (URL, user) and Kerberos artifacts if applicable (service principal and keytab)"}),"\n"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Optional: build the Docker image"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"If you want to build from sources:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker build -t <your-registry>/hdfs-csi-plugin:latest .\r\ndocker push <your-registry>/hdfs-csi-plugin:latest\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"Prepare your Helm values"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Create a custom values file (e.g., values.override.yaml):"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'hdfs:\r\n  url: "hdfs://namenode:8020"\r\n  user: "hdfs_csi"\r\n\r\nimage:\r\n  repository: <your-registry>/hdfs-csi-plugin\r\n  tag: latest\n'})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:"Install"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"From the repository root (where the chart is located):"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"helm upgrade --install hdfs-csi-plugin ./hdfs-csi-plugin -n default -f values.override.yaml\n"})}),"\n",(0,i.jsx)(n.p,{children:"Resources deployed (depending on the chart):"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"ConfigMap/Secret for HDFS and Kerberos configuration"}),"\n",(0,i.jsx)(n.li,{children:"Deployment/DaemonSet for Controller and Node components\r\n+- Required CSI sidecars (provisioner, attacher, registrar, liveness)"}),"\n"]}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsx)(n.li,{children:"Verify"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl get pods -n default\r\nkubectl logs deploy/hdfs-csi-plugin -n default --tail=200\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"5",children:["\n",(0,i.jsx)(n.li,{children:"Upgrade"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Update your values then run:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"helm upgrade hdfs-csi-plugin ./hdfs-csi-plugin -n default -f values.override.yaml\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"6",children:["\n",(0,i.jsx)(n.li,{children:"Rollback"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"helm history hdfs-csi-plugin -n default\r\nhelm rollback hdfs-csi-plugin <REVISION> -n default\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"7",children:["\n",(0,i.jsx)(n.li,{children:"Uninstall"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"helm uninstall hdfs-csi-plugin -n default\n"})}),"\n",(0,i.jsx)(n.p,{children:"Deployment best practices:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Use a dedicated namespace (e.g., storage)"}),"\n",(0,i.jsx)(n.li,{children:"Set CPU/Memory requests and limits on the driver and sidecars"}),"\n",(0,i.jsx)(n.li,{children:"Version your values files and deploy via CI/CD"}),"\n",(0,i.jsx)(n.li,{children:"Validate in staging connected to a test HDFS cluster before production"}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>a});var r=s(6540);const i={},l=r.createContext(i);function t(e){const n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);