"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[9507],{3947:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>p,frontMatter:()=>a,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"kirka/examples","title":"Examples","description":"Kirka can be exposed through Apache Knox to provide a single point of entry, authentication, and service discovery.","source":"@site/docs/kirka/examples.md","sourceDirName":"kirka","slug":"/kirka/examples","permalink":"/kirka/examples","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/kirka/examples.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"id":"examples","title":"Examples","sidebar_position":7},"sidebar":"tutorialSidebar","previous":{"title":"Security","permalink":"/kirka/security"},"next":{"title":"Operations","permalink":"/kirka/operations"}}');var o=r(4848),t=r(8453);const a={id:"examples",title:"Examples",sidebar_position:7},s=void 0,l={},c=[{value:"1. Service Definition",id:"1-service-definition",level:3},{value:"2. Topology Configuration",id:"2-topology-configuration",level:3},{value:"3. Accessing Kirka via Knox",id:"3-accessing-kirka-via-knox",level:3},{value:"Python Example",id:"python-example",level:4},{value:"Environment Variables",id:"environment-variables",level:4},{value:"Direct Usage Example",id:"direct-usage-example",level:2}];function d(e){const n={code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:"Kirka can be exposed through Apache Knox to provide a single point of entry, authentication, and service discovery."}),"\n",(0,o.jsx)(n.h3,{id:"1-service-definition",children:"1. Service Definition"}),"\n",(0,o.jsxs)(n.p,{children:["Add the files in the ",(0,o.jsx)(n.code,{children:"knox/"})," directory to your Knox installation (assuming provided in source):"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Copy ",(0,o.jsx)(n.code,{children:"knox/service.xml"})," and ",(0,o.jsx)(n.code,{children:"knox/rewrite.xml"})," to ",(0,o.jsx)(n.code,{children:"{KNOX_HOME}/data/services/kirka/0.0.1/"})]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"2-topology-configuration",children:"2. Topology Configuration"}),"\n",(0,o.jsxs)(n.p,{children:["Add to your Knox topology file (e.g., ",(0,o.jsx)(n.code,{children:"default.xml"}),"):"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-xml",children:"<service>\r\n    <role>KIRKA</role>\r\n    <url>http://{kirka-host}:{kirka-port}</url>\r\n</service>\n"})}),"\n",(0,o.jsx)(n.h3,{id:"3-accessing-kirka-via-knox",children:"3. Accessing Kirka via Knox"}),"\n",(0,o.jsxs)(n.p,{children:["Tracking URI: ",(0,o.jsx)(n.code,{children:"https://<knox-host>:<knox-port>/gateway/<topology-name>/kirka"})]}),"\n",(0,o.jsx)(n.h4,{id:"python-example",children:"Python Example"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"import mlflow\r\nimport os\r\n\r\n# Set tracking URI via Knox\r\nknox_uri = \"https://knox-gateway:8443/gateway/sandbox/kirka\"\r\nmlflow.set_tracking_uri(knox_uri)\r\n\r\n# Knox Basic Auth (if enabled)\r\nos.environ['MLFLOW_TRACKING_USERNAME'] = 'your_username'\r\nos.environ['MLFLOW_TRACKING_PASSWORD'] = 'your_password'\r\n\r\n# Skip SSL if self-signed\r\nos.environ['MLFLOW_TRACKING_INSECURE_TLS'] = 'true'\r\n\r\n# Usage\r\nwith mlflow.start_run():\r\n    mlflow.log_param(\"param1\", 5)\r\n    mlflow.log_metric(\"foo\", 1.0)\n"})}),"\n",(0,o.jsx)(n.h4,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"export MLFLOW_TRACKING_URI=https://knox-gateway:8443/gateway/sandbox/kirka\r\nexport MLFLOW_TRACKING_USERNAME=admin\r\nexport MLFLOW_TRACKING_PASSWORD=admin-password\r\nexport MLFLOW_TRACKING_INSECURE_TLS=true\n"})}),"\n",(0,o.jsx)(n.h2,{id:"direct-usage-example",children:"Direct Usage Example"}),"\n",(0,o.jsxs)(n.p,{children:["Set ",(0,o.jsx)(n.code,{children:"MLFLOW_TRACKING_URI=http://kirka-host:8080"})," and use standard MLflow clients."]})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>s});var i=r(6540);const o={},t=i.createContext(o);function a(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);