"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8312],{4405:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>u,frontMatter:()=>s,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"argus/examples","title":"Examples","description":"DSN connections (SQLConnect)","source":"@site/docs/argus/examples.md","sourceDirName":"argus","slug":"/argus/examples","permalink":"/argus/examples","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/argus/examples.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"id":"examples","title":"Examples","sidebar_position":7},"sidebar":"tutorialSidebar","previous":{"title":"Security","permalink":"/argus/security"},"next":{"title":"Operations","permalink":"/argus/operations"}}');var l=i(4848),t=i(8453);const s={id:"examples",title:"Examples",sidebar_position:7},c=void 0,a={},o=[{value:"DSN connections (SQLConnect)",id:"dsn-connections-sqlconnect",level:2},{value:"DSN-less connections (SQLDriverConnect)",id:"dsn-less-connections-sqldriverconnect",level:2},{value:"Hive",id:"hive",level:3},{value:"Impala",id:"impala",level:3},{value:"Trino",id:"trino",level:3},{value:"Phoenix",id:"phoenix",level:3},{value:"Kudu",id:"kudu",level:3},{value:"Production configurations",id:"production-configurations",level:2},{value:"Hive with SSL and logging",id:"hive-with-ssl-and-logging",level:3},{value:"Impala with retry and timeout",id:"impala-with-retry-and-timeout",level:3},{value:"Trino with HTTPS and mutual TLS",id:"trino-with-https-and-mutual-tls",level:3},{value:"Phoenix with timeout",id:"phoenix-with-timeout",level:3},{value:"Kudu with query timeout",id:"kudu-with-query-timeout",level:3},{value:"C/C++ usage",id:"cc-usage",level:2},{value:"Connect and query",id:"connect-and-query",level:3},{value:"Query cancellation",id:"query-cancellation",level:3},{value:"DSN configuration examples",id:"dsn-configuration-examples",level:2},{value:"Hive DSN",id:"hive-dsn",level:3},{value:"Impala DSN",id:"impala-dsn",level:3},{value:"Trino DSN",id:"trino-dsn",level:3},{value:"Phoenix DSN",id:"phoenix-dsn",level:3},{value:"Kudu DSN",id:"kudu-dsn",level:3},{value:"Testing with isql",id:"testing-with-isql",level:2},{value:"Cloud environments",id:"cloud-environments",level:2},{value:"AWS EMR Hive",id:"aws-emr-hive",level:3},{value:"Kubernetes",id:"kubernetes",level:3}];function d(e){const n={code:"code",h2:"h2",h3:"h3",pre:"pre",...(0,t.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h2,{id:"dsn-connections-sqlconnect",children:"DSN connections (SQLConnect)"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-c",children:'SQLConnect(dbc, "ArgusHive", SQL_NTS, "hive", SQL_NTS, "", SQL_NTS);\n'})}),"\n",(0,l.jsx)(n.h2,{id:"dsn-less-connections-sqldriverconnect",children:"DSN-less connections (SQLDriverConnect)"}),"\n",(0,l.jsx)(n.h3,{id:"hive",children:"Hive"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"HOST=hive-server;PORT=10000;UID=admin;PWD=secret;DATABASE=mydb;BACKEND=hive\n"})}),"\n",(0,l.jsx)(n.h3,{id:"impala",children:"Impala"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"HOST=impala-server;PORT=21050;UID=admin;PWD=secret;DATABASE=mydb;BACKEND=impala\n"})}),"\n",(0,l.jsx)(n.h3,{id:"trino",children:"Trino"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"HOST=trino-server;PORT=8080;UID=admin;DATABASE=hive;BACKEND=trino\n"})}),"\n",(0,l.jsx)(n.h3,{id:"phoenix",children:"Phoenix"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"HOST=phoenix-server;PORT=8765;UID=admin;DATABASE=myschema;BACKEND=phoenix\n"})}),"\n",(0,l.jsx)(n.h3,{id:"kudu",children:"Kudu"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"HOST=kudu-master;PORT=7051;DATABASE=default;BACKEND=kudu\n"})}),"\n",(0,l.jsx)(n.h2,{id:"production-configurations",children:"Production configurations"}),"\n",(0,l.jsx)(n.h3,{id:"hive-with-ssl-and-logging",children:"Hive with SSL and logging"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"HOST=hive.example.com;PORT=10000;UID=admin;PWD=secret;\r\nSSL=1;SSLCAFile=/etc/ssl/certs/ca-bundle.crt;SSLVerify=1;\r\nLogLevel=4;LogFile=/var/log/argus-hive.log;\r\nBACKEND=hive;ApplicationName=ETL-Pipeline\n"})}),"\n",(0,l.jsx)(n.h3,{id:"impala-with-retry-and-timeout",children:"Impala with retry and timeout"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"HOST=impala.example.com;PORT=21050;UID=admin;PWD=secret;\r\nDATABASE=warehouse;BACKEND=impala;\r\nRetryCount=3;RetryDelay=2;\r\nConnectTimeout=30;QueryTimeout=600;SocketTimeout=120;\r\nFetchBufferSize=5000;ApplicationName=Analytics\n"})}),"\n",(0,l.jsx)(n.h3,{id:"trino-with-https-and-mutual-tls",children:"Trino with HTTPS and mutual TLS"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"HOST=trino.example.com;PORT=8443;UID=admin;PWD=secret;\r\nSSL=1;SSLVerify=1;\r\nSSLCertFile=/etc/ssl/certs/client-cert.pem;\r\nSSLKeyFile=/etc/ssl/private/client-key.pem;\r\nSSLCAFile=/etc/ssl/certs/trino-ca.pem;\r\nBACKEND=trino;LogLevel=5;ApplicationName=Dashboard\n"})}),"\n",(0,l.jsx)(n.h3,{id:"phoenix-with-timeout",children:"Phoenix with timeout"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"HOST=pqs.example.com;PORT=8765;UID=admin;\r\nDATABASE=myschema;BACKEND=phoenix;\r\nConnectTimeout=30;QueryTimeout=300;\r\nLogLevel=4;LogFile=/var/log/argus-phoenix.log;\r\nApplicationName=HBase-Analytics\n"})}),"\n",(0,l.jsx)(n.h3,{id:"kudu-with-query-timeout",children:"Kudu with query timeout"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"HOST=kudu-master.example.com;PORT=7051;\r\nDATABASE=production;BACKEND=kudu;\r\nConnectTimeout=15;QueryTimeout=120;\r\nLogLevel=4;LogFile=/var/log/argus-kudu.log;\r\nApplicationName=Kudu-Scanner\n"})}),"\n",(0,l.jsx)(n.h2,{id:"cc-usage",children:"C/C++ usage"}),"\n",(0,l.jsx)(n.h3,{id:"connect-and-query",children:"Connect and query"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-c",children:'SQLHENV env;\r\nSQLHDBC dbc;\r\nSQLHSTMT stmt;\r\n\r\nSQLAllocHandle(SQL_HANDLE_ENV, SQL_NULL_HANDLE, &env);\r\nSQLSetEnvAttr(env, SQL_ATTR_ODBC_VERSION, (void*)SQL_OV_ODBC3, 0);\r\nSQLAllocHandle(SQL_HANDLE_DBC, env, &dbc);\r\n\r\nconst char *conn_str =\r\n    "HOST=hive-server;PORT=10000;UID=admin;PWD=secret;"\r\n    "DATABASE=mydb;BACKEND=hive;LogLevel=5";\r\n\r\nSQLDriverConnect(dbc, NULL, (SQLCHAR*)conn_str, SQL_NTS,\r\n                 NULL, 0, NULL, SQL_DRIVER_NOPROMPT);\r\n\r\nSQLAllocHandle(SQL_HANDLE_STMT, dbc, &stmt);\r\nSQLExecDirect(stmt, (SQLCHAR*)"SELECT * FROM my_table", SQL_NTS);\r\n\r\nSQLCHAR col1[256];\r\nSQLLEN ind;\r\nSQLBindCol(stmt, 1, SQL_C_CHAR, col1, sizeof(col1), &ind);\r\n\r\nwhile (SQLFetch(stmt) == SQL_SUCCESS) {\r\n    printf("%s\\n", col1);\r\n}\r\n\r\nSQLFreeHandle(SQL_HANDLE_STMT, stmt);\r\nSQLDisconnect(dbc);\r\nSQLFreeHandle(SQL_HANDLE_DBC, dbc);\r\nSQLFreeHandle(SQL_HANDLE_ENV, env);\n'})}),"\n",(0,l.jsx)(n.h3,{id:"query-cancellation",children:"Query cancellation"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-c",children:'// Execute in background thread\r\nSQLExecDirect(stmt, (SQLCHAR*)"SELECT * FROM huge_table", SQL_NTS);\r\n\r\n// Cancel from another thread\r\nSQLCancel(stmt);\n'})}),"\n",(0,l.jsx)(n.h2,{id:"dsn-configuration-examples",children:"DSN configuration examples"}),"\n",(0,l.jsx)(n.h3,{id:"hive-dsn",children:"Hive DSN"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ini",children:"[ArgusHive]\r\nDriver = Argus\r\nHOST = localhost\r\nPORT = 10000\r\nUID = hive\r\nDATABASE = default\r\nAUTHMECH = NOSASL\r\nBACKEND = hive\n"})}),"\n",(0,l.jsx)(n.h3,{id:"impala-dsn",children:"Impala DSN"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ini",children:"[ArgusImpala]\r\nDriver = Argus\r\nHOST = impala-host\r\nPORT = 21050\r\nUID = impala\r\nDATABASE = default\r\nBACKEND = impala\n"})}),"\n",(0,l.jsx)(n.h3,{id:"trino-dsn",children:"Trino DSN"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ini",children:"[ArgusTrino]\r\nDriver = Argus\r\nHOST = trino-coordinator\r\nPORT = 8080\r\nUID = analyst\r\nDATABASE = hive\r\nBACKEND = trino\n"})}),"\n",(0,l.jsx)(n.h3,{id:"phoenix-dsn",children:"Phoenix DSN"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ini",children:"[ArgusPhoenix]\r\nDriver = Argus\r\nHOST = phoenix-qs\r\nPORT = 8765\r\nUID = admin\r\nDATABASE = myschema\r\nBACKEND = phoenix\n"})}),"\n",(0,l.jsx)(n.h3,{id:"kudu-dsn",children:"Kudu DSN"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ini",children:"[ArgusKudu]\r\nDriver = Argus\r\nHOST = kudu-master\r\nPORT = 7051\r\nDATABASE = default\r\nBACKEND = kudu\n"})}),"\n",(0,l.jsx)(n.h2,{id:"testing-with-isql",children:"Testing with isql"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"isql -v ArgusHive\r\n\r\n# SQL> SELECT 1;\n"})}),"\n",(0,l.jsx)(n.h2,{id:"cloud-environments",children:"Cloud environments"}),"\n",(0,l.jsx)(n.h3,{id:"aws-emr-hive",children:"AWS EMR Hive"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"HOST=ec2-xx-xx-xx-xx.compute.amazonaws.com;PORT=10000;\r\nUID=hadoop;DATABASE=default;BACKEND=hive;\r\nConnectTimeout=20;RetryCount=3;ApplicationName=AWS-ETL\n"})}),"\n",(0,l.jsx)(n.h3,{id:"kubernetes",children:"Kubernetes"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"HOST=trino-service.default.svc.cluster.local;PORT=8080;\r\nUID=admin;BACKEND=trino;\r\nConnectTimeout=15;QueryTimeout=300;ApplicationName=K8s-App\n"})})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>c});var r=i(6540);const l={},t=r.createContext(l);function s(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:s(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);